!function(e){"use strict";e.fn.dividize=function(a){var d=e.extend({customHeaderTarget:"th",removeHeaders:!1,addLabelHeaders:!1,hideLabels:!0,preserveEvents:!1,preserveDim:!1,classes:"",enableAltRows:!1},a),t={container:{eventContainer:{}},save:function(a){var d=this;a.find("*").each(function(a,t){var s=e(t).data("events"),n="index-"+a;return"undefined"==typeof s?!0:(e.each(s,function(a,t){e.each(t,function(e,a){var t=a.namespace.length>0?a.type+"."+a.namespace:a.type;"undefined"==typeof d.container.eventContainer[n]&&(d.container.eventContainer[n]=[]),d.container.eventContainer[n].push({eventToBind:t,eventData:a.data,eventHandler:a.handler})})}),void e(t).attr("data-event-index",n))})},restore:function(a){var d=this;a.find("*").each(function(a,t){var s=e(t),n=s.attr("data-event-index");if("undefined"!=typeof n)for(var r=d.container.eventContainer[n],i=0;i<r.length;i++){var v=r[i];s.unbind(v.eventToBind),s.bind(v.eventToBind,v.eventData,v.eventHandler)}})}};d.preserveEvents&&t.save(this);var s=0;this.replaceWith(function(){var a=e(this),n=a.find(d.customHeaderTarget),r=n.map(function(){return e(this).html()}).get();d.removeHeaders&&n.closest("tr").remove();var i=e("<div>").addClass("dvdz-box").addClass(d.classes),v=a.find("tr").length;return e("tr",a).each(function(a){var t=e("<div>").addClass("dvdz-"+s++).addClass("dvdz-row").addClass("dvdz-row-"+a).appendTo(i);d.enableAltRows&&t.addClass(a%2===0?"even":"odd"),0===a?t.addClass("first-row"):a==v-1&&t.addClass("last-row");var n=e(this).find("td, "+d.customHeaderTarget).length;e("td, "+d.customHeaderTarget,this).each(function(a,i){var v=e("<div>").addClass("dvdz-"+s++).addClass("dvdz-cell").addClass("dvdz-cell-"+a).addClass(e(this).is(d.customHeaderTarget)?"data-exth":"");if(0===a?v.addClass("first-cell"):a==n-1&&v.addClass("last-cell"),d.preserveDim&&(v.addClass("dvdz-dim-cell"),v.css({"line-height":e(i).outerHeight()+"px",height:e(i).outerHeight()+"px",width:e(i).outerWidth()+"px"})),d.addLabelHeaders&&!e(this).is(d.customHeaderTarget)){var l=e("<div>").addClass("dvdz-"+s++).addClass("dvdz-label").addClass("dvdz-label-"+a).html(r[a]);d.hideLabels&&l.addClass("dvdz-hidden"),v.append(l)}var o=e("<div>").addClass("dvdz-"+s++).addClass("dvdz-data").addClass("dvdz-data-"+a).html(e(this).html());d.preserveDim&&o.addClass("dvdz-dim-data"),v.append(o),v.appendTo(t)})}),d.preserveEvents&&t.restore(i),i})}}(jQuery);
